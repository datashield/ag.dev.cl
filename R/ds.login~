



ds.login <- function(loginfile){

  # login the file that holds the login details
  logins <- read.table(loginfile, header=T, sep=",")
  
  # URLs 
  urls <- as.character(logins[,2])
  
  # usernames
  userids <- as.character(logins[,3])
  
  # passwords
  pwds <- as.character(logins[,4])
  
  # opal directories where the microdata is stored
  paths <- as.character(logins[,5])
  
  # put the server names in a list
  opals <- as.list(as.character(logins$servers))
  
  # login to the oplas keeping the server names as 
  # specified in the login file
    print("loging to the collaborating servers")
  opals <- vector("list", length(urls))
  names(opals) <- as.character(logins[,1])
  for(i in 1:length(opals) {
     opals[[i]] <- opal.login(userids[i], pwds[i], urls[i])
  }
  
  # assign data to the opal server you logged in to
  print("assigining data")
  for(i in 1:length(opals){
     datashield.assign(opals[i], 'D', 'CNSIM.CNSIM')
  }
  

}
